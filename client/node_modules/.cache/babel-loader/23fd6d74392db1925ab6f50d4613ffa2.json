{"ast":null,"code":"import _asyncToGenerator from\"/Users/mohdkamleh/Desktop/node practise/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mohdkamleh/Desktop/node practise/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/mohdkamleh/Desktop/node practise/client/node_modules/@babel/runtime/regenerator/index.js\";import{useCallback,useEffect,useState}from\"react\";import{httpGetLaunches,httpSubmitLaunch,httpAbortLaunch}from'./requests';function useLaunches(onSuccessSound,onAbortSound,onFailureSound){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),launches=_useState2[0],saveLaunches=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isPendingLaunch=_useState4[0],setPendingLaunch=_useState4[1];var getLaunches=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var fetchedLaunches;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return httpGetLaunches();case 2:fetchedLaunches=_context.sent;saveLaunches(fetchedLaunches);case 4:case\"end\":return _context.stop();}}},_callee);})),[]);useEffect(function(){getLaunches();},[getLaunches]);var submitLaunch=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var data,launchDate,mission,rocket,target,response,success;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();setPendingLaunch(true);data=new FormData(e.target);launchDate=new Date(data.get(\"launch-day\"));mission=data.get(\"mission-name\");rocket=data.get(\"rocket-name\");target=data.get(\"planets-selector\");_context2.next=9;return httpSubmitLaunch({launchDate:launchDate,mission:mission,rocket:rocket,target:target});case 9:response=_context2.sent;// TODO: Set success based on response.\nsuccess=response.ok;if(success){getLaunches();setTimeout(function(){setPendingLaunch(false);onSuccessSound();},800);}else{setTimeout(function(){setPendingLaunch(false);onFailureSound();},800);}case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}(),[getLaunches,onSuccessSound,onFailureSound]);var abortLaunch=useCallback(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var response,success;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return httpAbortLaunch(id);case 2:response=_context3.sent;// TODO: Set success based on response.\nsuccess=false;if(success){getLaunches();onAbortSound();}else{onFailureSound();}case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}(),[getLaunches,onAbortSound,onFailureSound]);return{launches:launches,isPendingLaunch:isPendingLaunch,submitLaunch:submitLaunch,abortLaunch:abortLaunch};}export default useLaunches;","map":{"version":3,"names":["useCallback","useEffect","useState","httpGetLaunches","httpSubmitLaunch","httpAbortLaunch","useLaunches","onSuccessSound","onAbortSound","onFailureSound","launches","saveLaunches","isPendingLaunch","setPendingLaunch","getLaunches","fetchedLaunches","submitLaunch","e","preventDefault","data","FormData","target","launchDate","Date","get","mission","rocket","response","success","ok","setTimeout","abortLaunch","id"],"sources":["/Users/mohdkamleh/Desktop/node practise/client/src/hooks/useLaunches.js"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\n\nimport {\n  httpGetLaunches,\n  httpSubmitLaunch,\n  httpAbortLaunch,\n} from './requests';\n\nfunction useLaunches(onSuccessSound, onAbortSound, onFailureSound) {\n  const [launches, saveLaunches] = useState([]);\n  const [isPendingLaunch, setPendingLaunch] = useState(false);\n\n  const getLaunches = useCallback(async () => {\n    const fetchedLaunches = await httpGetLaunches();\n    saveLaunches(fetchedLaunches);\n  }, []);\n\n  useEffect(() => {\n    getLaunches();\n  }, [getLaunches]);\n\n  const submitLaunch = useCallback(async (e) => {\n    e.preventDefault();\n    setPendingLaunch(true);\n    const data = new FormData(e.target);\n    const launchDate = new Date(data.get(\"launch-day\"));\n    const mission = data.get(\"mission-name\");\n    const rocket = data.get(\"rocket-name\");\n    const target = data.get(\"planets-selector\");\n    const response = await httpSubmitLaunch({\n      launchDate,\n      mission,\n      rocket,\n      target,\n    });\n\n    // TODO: Set success based on response.\n    const success = response.ok;\n    if (success) {\n      getLaunches();\n      setTimeout(() => {\n        setPendingLaunch(false);\n        onSuccessSound();\n      }, 800);\n    } else {\n      setTimeout(() => {\n        setPendingLaunch(false);\n        onFailureSound();\n    }, 800);\n    }\n  }, [getLaunches, onSuccessSound, onFailureSound]);\n\n  const abortLaunch = useCallback(async (id) => {\n    const response = await httpAbortLaunch(id);\n\n    // TODO: Set success based on response.\n    const success = false;\n    if (success) {\n      getLaunches();\n      onAbortSound();\n    } else {\n      onFailureSound();\n    }\n  }, [getLaunches, onAbortSound, onFailureSound]);\n\n  return {\n    launches,\n    isPendingLaunch,\n    submitLaunch,\n    abortLaunch,\n  };\n}\n\nexport default useLaunches;"],"mappings":"+YAAA,OAASA,WAAW,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAExD,OACEC,eAAe,CACfC,gBAAgB,CAChBC,eAAe,KACV,YAAY,CAEnB,QAASC,YAAW,CAACC,cAAc,CAAEC,YAAY,CAAEC,cAAc,CAAE,CACjE,cAAiCP,QAAQ,CAAC,EAAE,CAAC,wCAAtCQ,QAAQ,eAAEC,YAAY,eAC7B,eAA4CT,QAAQ,CAAC,KAAK,CAAC,yCAApDU,eAAe,eAAEC,gBAAgB,eAExC,GAAMC,YAAW,CAAGd,WAAW,sEAAC,6KACAG,gBAAe,EAAE,QAAzCY,eAAe,eACrBJ,YAAY,CAACI,eAAe,CAAC,CAAC,sDAC/B,GAAE,EAAE,CAAC,CAENd,SAAS,CAAC,UAAM,CACda,WAAW,EAAE,CACf,CAAC,CAAE,CAACA,WAAW,CAAC,CAAC,CAEjB,GAAME,aAAY,CAAGhB,WAAW,2FAAC,kBAAOiB,CAAC,iLACvCA,CAAC,CAACC,cAAc,EAAE,CAClBL,gBAAgB,CAAC,IAAI,CAAC,CAChBM,IAAI,CAAG,GAAIC,SAAQ,CAACH,CAAC,CAACI,MAAM,CAAC,CAC7BC,UAAU,CAAG,GAAIC,KAAI,CAACJ,IAAI,CAACK,GAAG,CAAC,YAAY,CAAC,CAAC,CAC7CC,OAAO,CAAGN,IAAI,CAACK,GAAG,CAAC,cAAc,CAAC,CAClCE,MAAM,CAAGP,IAAI,CAACK,GAAG,CAAC,aAAa,CAAC,CAChCH,MAAM,CAAGF,IAAI,CAACK,GAAG,CAAC,kBAAkB,CAAC,wBACpBpB,iBAAgB,CAAC,CACtCkB,UAAU,CAAVA,UAAU,CACVG,OAAO,CAAPA,OAAO,CACPC,MAAM,CAANA,MAAM,CACNL,MAAM,CAANA,MACF,CAAC,CAAC,QALIM,QAAQ,gBAOd;AACMC,OAAO,CAAGD,QAAQ,CAACE,EAAE,CAC3B,GAAID,OAAO,CAAE,CACXd,WAAW,EAAE,CACbgB,UAAU,CAAC,UAAM,CACfjB,gBAAgB,CAAC,KAAK,CAAC,CACvBN,cAAc,EAAE,CAClB,CAAC,CAAE,GAAG,CAAC,CACT,CAAC,IAAM,CACLuB,UAAU,CAAC,UAAM,CACfjB,gBAAgB,CAAC,KAAK,CAAC,CACvBJ,cAAc,EAAE,CACpB,CAAC,CAAE,GAAG,CAAC,CACP,CAAC,yDACF,gEAAE,CAACK,WAAW,CAAEP,cAAc,CAAEE,cAAc,CAAC,CAAC,CAEjD,GAAMsB,YAAW,CAAG/B,WAAW,2FAAC,kBAAOgC,EAAE,kKAChB3B,gBAAe,CAAC2B,EAAE,CAAC,QAApCL,QAAQ,gBAEd;AACMC,OAAO,CAAG,KAAK,CACrB,GAAIA,OAAO,CAAE,CACXd,WAAW,EAAE,CACbN,YAAY,EAAE,CAChB,CAAC,IAAM,CACLC,cAAc,EAAE,CAClB,CAAC,wDACF,iEAAE,CAACK,WAAW,CAAEN,YAAY,CAAEC,cAAc,CAAC,CAAC,CAE/C,MAAO,CACLC,QAAQ,CAARA,QAAQ,CACRE,eAAe,CAAfA,eAAe,CACfI,YAAY,CAAZA,YAAY,CACZe,WAAW,CAAXA,WACF,CAAC,CACH,CAEA,cAAezB,YAAW"},"metadata":{},"sourceType":"module"}